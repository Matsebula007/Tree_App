#: import FadeTransition kivy.uix.screenmanager.FadeTransition
<CircularProgressBar>
    md_bg_color:244/255,249/255,253/255,.4
    canvas.before:
        Color:
            rgba:root.bar_color +[0.2]
        Line:
            width:8
            ellipse:(self.x,self.y,self.width,self.height,0,360)
    canvas.after:
        Color:
            rgba:root.bar_color +[0.5]
        Line:
            width:8
            ellipse:(self.x,self.y,self.width,self.height,0,root.set_value*3.6)

    MDLabel:
        text: root.text
        font_name: 'assets/fonts/Oxygen-Bold.ttf'
        font_size:"22sp"
        pos_hint:{"center_x":.5,"center_y":.5}
        halign:"center"
        color: root.bar_color

<CourseCard>
    id: course_card
    elevation: 0
    #md_bg_color:244/255,249/255,253/255,1
    radius:[8]
    size_hint:1,None
    height:dp(180)
    course_key:course_key
    cid:cid
    crsecr:crsecr
    caBar:caBar

    #to Overview more on course button
    Button:
        size_hint: .8,.8
        pos_hint: {"center_x":.5,"center_y":.5}    
        on_release:
            app.get_id(cid.text,crsecr.text)
            root.navigate()
            root.add_Overview(cid.text)

    #card primary key holder
    MDLabel:
        id:course_key
        markup:True

    #course CARD settings
    MDFloatLayout:
        size_hint:1,1
        pos_hint: {"center_x": .5,"center_y": .5}
        canvas:
            Color:
                rgba:app.Courseschooser()
            RoundedRectangle:
                size:self.size
                pos:self.pos
                radius:[15]
        
        #Course identity
        MDLabel:
            id:cid
            text:root.CourseID
            markup: True
            font_name: 'assets/fonts/JosefinSans-Bold.ttf'
            font_size:"26sp"
            size_hint_x:.8
            size_hint_y:.5
            pos_hint:{"center_x":.48,"center_y": .85}

        #course credit
        MDLabel:
            id:crsecr
            text:root.C_Credit
            markup: True
            font_name: 'assets/fonts/CroissantOne-Regular.ttf'
            font_size:"22sp"
            size_hint_x:.8
            size_hint_y:.5
            pos_hint:{"center_x":.48,"center_y": .7}

        #CA CircularProgressBar settings 
        MDFloatLayout:
            size_hint:.5,.5
            pos_hint: {"center_x": .22,"center_y": .32}
            canvas:
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[10]
            
            CircularProgressBar:
                id:caBar
                size_hint:None,None
                size:85,85
                value:root.crsaverage
                pos_hint:{"center_x":.5,"center_y": .5}

        #Basis settings 
        MDFloatLayout:
            size_hint:.5,.5
            pos_hint: {"center_x": .8,"center_y": .36}
            canvas:
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[10]
            MDLabel:
                text:"Basis"
                font_name: 'assets/fonts/CroissantOne-Regular.ttf'
                font_size:"26sp"
                padding:1,0
                size_hint_x:.7
                size_hint_y:.8
                pos_hint:{"center_x":.5,"center_y": .8}
            MDLabel:
                text:"39"
                font_name: 'assets/fonts/CroissantOne-Regular.ttf'
                font_size:"48sp"
                padding:1,0
                size_hint_x:.7
                size_hint_y:.8
                pos_hint:{"center_x":.5,"center_y": .3}

        #CA Ratio
        MDFloatLayout:
            size_hint:.2,.3
            pos_hint: {"center_x": .64,"center_y": .8}
            canvas:
                Color:
                    rgba:(30/255,47/255,151/255,.8)
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[10] 
            MDLabel:
                text:"CA"
                color:244/255,249/255,253/255,1
                font_name: 'assets/fonts/JosefinSans-Regular.ttf'
                font_size:"18sp"
                pos_hint:{"center_x":.78,"center_y": .78}
            MDLabel:
                text:root.CA_ratio
                color:244/255,249/255,253/255,1
                font_name: 'assets/fonts/Oxygen-Regular.ttf'
                font_size:"20sp"
                pos_hint:{"center_x":.78,"center_y": .38}

        #Ex Ratio
        MDFloatLayout:
            size_hint:.2,.3
            pos_hint: {"center_x":.86,"center_y": .8}
            canvas:
                Color:
                    rgba:(30/255,47/255,151/255,.8)
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[10]
            MDLabel:
                text:"Exam"
                color:244/255,249/255,253/255,1
                font_name: 'assets/fonts/JosefinSans-Regular.ttf'
                font_size:"16sp"
                pos_hint:{"center_x":.6,"center_y": .78}

            MDLabel:
                text:root.Ex_ratio
                color:244/255,249/255,253/255,1
                font_name: 'assets/fonts/Oxygen-Regular.ttf'
                font_size:"20sp"
                pos_hint:{"center_x":.8,"center_y": .38}


MDScreen:
    name: "CoursesScreen"
    md_bg_color: 244/255,249/255,253/255,1
    course_list:course_list  
    crtot:crtot

    #your courses
    MDFloatLayout:
        MDLabel:
            text:"Your courses"
            text_color: 245/255,250/255,255/255,1 
            pos_hint: {"center_x":.55,"center_y": .96}
            foreground_color: 1/255,1/255,1/255,.8
            background_color: 0,0,0,0
            font_name: 'assets/fonts/JosefinSans-Bold.ttf'
            font_size:"28dp"  
        MDLabel:
            id:crtot
            text:app.creditscal()
            pos_hint: {"center_x":.54,"center_y": .92}
            font_name: 'assets/fonts/CroissantOne-Regular.ttf'
            font_size:"18dp"  

    #add Course button
    HoverButton:
        size_hint: .2,.046
        text: "+"
        font_name: 'assets/fonts/JosefinSans-Bold.ttf'
        font_size: "32dp"
        background_color:1,1,1,0
        pos_hint: {"center_x":.8 ,"center_y":.94}
        color: 1,1,1,1     
        canvas.before:
            Color:
                rgba:self.background
            RoundedRectangle:
                size:self.size
                pos:self.pos
                radius:[10]
        on_release:
            root.manager.transition = FadeTransition()
            root.manager.current = "addCourse"
       
   #Course view
    MDFloatLayout:
        size_hint:.99,.8
        pos_hint:{"center_x":.5,"center_y": .5} 
        canvas:
            RoundedRectangle:
                size:self.size
                pos:self.pos
                radius:[15]   
        ScrollView:
            do_scroll_y:True
            do_scroll_x:False
            size_hint_y:1
            pos_hint:{"center_x":.5,"center_y": .5}
            bar_width:2
            bar_color:(30/255,47/255,151/255,.8)
            GridLayout:
                orientation: "lr-bt"
                id: course_list
                cols: 1
                height:self.minimum_height
                row_default_height:80
                size_hint_y:None
                padding:8,10
                spacing:10,10
  
#navigation menu                    
    MDFloatLayout:
        size_hint:.98,.1
        pos_hint: {"center_x": .5,"center_y": .06}
        canvas:
            Color:
                rgba:(0/255,0/255,0/255,1)
            RoundedRectangle:
                size:self.size
                pos:self.pos
                radius:[15]
                
        MDIconButton:
            icon: "home"
            pos_hint: {"center_x":.2 ,"center_y":.5}
            theme_text_color:"Custom"
            text_color: 1,1,1,1
            on_press:
                root.manager.transition = FadeTransition()
                root.manager.current = "Home"

        MDIconButton:
            icon: "view-agenda"
            pos_hint: {"center_x":.4 ,"center_y":.5}
            theme_text_color:"Custom"
            text_color: 1,1,1,1
            on_press:
                root.manager.transition = FadeTransition()
                root.manager.current = "todoScreen" 
        
        MDFloatLayout:
            size_hint:.2,.8
            pos_hint: {"center_x": .6,"center_y": .5}
            canvas:
                Color:
                    rgba:(30/255,47/255,151/255,.2)
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[20]
            MDIconButton:
                icon: "library"
                pos_hint: {"center_x":.5 ,"center_y":.5}
                theme_text_color:"Custom"
                color:(30/255,47/255,151/255,1)
                on_press:
                    app.summariseCourse()
                    root.manager.transition = FadeTransition()
                    root.manager.current = "CoursesScreen"
        
        MDIconButton:
            icon: "account"
            pos_hint: {"center_x":.8 ,"center_y":.5}
            theme_text_color:"Custom"
            text_color: 1,1,1,1
            on_press:
                root.manager.transition = FadeTransition()
                root.manager.current = "AccountMenu"
