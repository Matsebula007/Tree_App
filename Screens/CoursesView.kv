#: import FadeTransition kivy.uix.screenmanager.FadeTransition
<CircularProgressBar>
    #md_bg_color:244/255,249/255,253/255,.4
    canvas.before:
        Color:
            rgba:(244/255,249/255,253/255,.4)
        Line:
            width:12
            ellipse:(self.x,self.y,self.width,self.height,0,360)
    canvas.after:
        Color:
            rgba:(244/255,249/255,253/255,1)
        Line:
            width:12
            ellipse:(self.x,self.y,self.width,self.height,0,root.set_value*3.6)

    MDLabel:
        text: root.text
        font_name: 'assets/fonts/Oxygen-Bold.ttf'
        font_size:"22sp"
        pos_hint:{"center_x":.5,"center_y":.5}
        halign:"center"
        color: root.bar_color

<CourseCard>
    id: course_card
    elevation: 0
    size_hint:1,None
    height:dp(180)
    course_key:course_key
    cid:cid
    crsecr:crsecr
    caBar:caBar
    basis:basis

    #to Overview more on course button
    Button:
        size_hint: .8,.8
        pos_hint: {"center_x":.5,"center_y":.5}    
        on_release:
            app.get_id(cid.text,crsecr.text)
            root.navigate()
            root.add_Overview(cid.text)

    #card primary key holder
    MDLabel:
        id:course_key
        markup:True

    #course CARD settings
    MDFloatLayout:
        size_hint:1,1
        pos_hint: {"center_x": .5,"center_y": .5}
        canvas:
            Color:
                rgba:app.courseschooser()
            RoundedRectangle:
                size:self.size
                pos:self.pos
                radius:[20]
        
        #Course identity
        MDLabel:
            id:cid
            text:root.CourseID
            markup: True
            font_name: 'assets/fonts/JosefinSans-Bold.ttf'
            font_size:"26sp"
            size_hint_x:.8
            size_hint_y:.5
            pos_hint:{"center_x":.48,"center_y": .85}

        #course credit
        MDLabel:
            id:crsecr
            text:root.C_Credit
            markup: True
            font_name: 'assets/fonts/CroissantOne-Regular.ttf'
            font_size:"22sp"
            size_hint_x:.8
            size_hint_y:.5
            pos_hint:{"center_x":.48,"center_y": .7}

        #CA CircularProgressBar settings 
        MDFloatLayout:
            size_hint:.32,.5
            pos_hint: {"center_x": .3,"center_y": .38}
            canvas:
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[100]
            
            CircularProgressBar:
                id:caBar
                size_hint:None,None
                size:100,100
                padding:8,10
                value:root.crsavg
                pos_hint:{"center_x":.5,"center_y": .5}

        #Basis settings 
        MDFloatLayout:
            size_hint:.5,.5
            pos_hint: {"center_x": .8,"center_y": .36}
            canvas:
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[10]
            MDLabel:
                text:"Basis"
                color:(244/255,249/255,253/255,1)
                font_name: 'assets/fonts/CroissantOne-Regular.ttf'
                font_size:"26sp"
                padding:1,0
                size_hint_x:.7
                size_hint_y:.8
                pos_hint:{"center_x":.5,"center_y": .8}
            MDLabel:
                id:basis
                text:root.Basis
                #color:(30/255,47/255,151/255,1)
                font_name: 'assets/fonts/CroissantOne-Regular.ttf'
                font_size:"48sp"
                padding:1,0
                size_hint_x:.8
                size_hint_y:.8
                pos_hint:{"center_x":.5,"center_y": .3}

        #CA Ratio
        MDFloatLayout:
            size_hint:.2,.3
            pos_hint: {"center_x": .64,"center_y": .8}
            canvas:
                Color:
                    rgba:(30/255,47/255,151/255,.8)
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[10] 
            MDLabel:
                text:"CA"
                color:244/255,249/255,253/255,1
                font_name: 'assets/fonts/JosefinSans-Regular.ttf'
                font_size:"18sp"
                pos_hint:{"center_x":.78,"center_y": .78}
            MDLabel:
                text:root.CA_ratio
                color:244/255,249/255,253/255,1
                font_name: 'assets/fonts/Oxygen-Regular.ttf'
                font_size:"20sp"
                pos_hint:{"center_x":.78,"center_y": .38}

        #Ex Ratio
        MDFloatLayout:
            size_hint:.2,.3
            pos_hint: {"center_x":.86,"center_y": .8}
            canvas:
                Color:
                    rgba:(30/255,47/255,151/255,.8)
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[10]
            MDLabel:
                text:"Exam"
                color:244/255,249/255,253/255,1
                font_name: 'assets/fonts/JosefinSans-Regular.ttf'
                font_size:"16sp"
                pos_hint:{"center_x":.6,"center_y": .78}

            MDLabel:
                text:root.Ex_ratio
                color:244/255,249/255,253/255,1
                font_name: 'assets/fonts/Oxygen-Regular.ttf'
                font_size:"20sp"
                pos_hint:{"center_x":.8,"center_y": .38}


MDScreen:
    name: "CoursesScreen"
    md_bg_color: 244/255,249/255,253/255,1
    course_list:course_list  
    crtot:crtot

    #your courses
    MDFloatLayout
        MDLabel:
            text:"Your courses"
            color:(0/255,0/255,0/255,1)
            pos_hint: {"center_x":.55,"center_y": .96}
            font_name: 'assets/fonts/JosefinSans-Bold.ttf'
            font_size:"28dp"  
        MDLabel:
            id:crtot
            text:app.creditscal()
            pos_hint: {"center_x":.54,"center_y": .92}
            font_name: 'assets/fonts/CroissantOne-Regular.ttf'
            font_size:"18dp"  

    #add Course button
    HoverButton:
        size_hint: .2,.046
        text: "+"
        font_name: 'assets/fonts/JosefinSans-Bold.ttf'
        font_size: "32dp"
        background_color:1,1,1,0
        pos_hint: {"center_x":.8 ,"center_y":.94}
        color: 1,1,1,1     
        canvas.before:
            Color:
                rgba:self.background
            RoundedRectangle:
                size:self.size
                pos:self.pos
                radius:[10]
        on_release:
            root.manager.transition = FadeTransition()
            root.manager.current = "addCourse"
            app.clear_add_course()
       
   #Course view
    MDFloatLayout:
        size_hint:.99,.8
        pos_hint:{"center_x":.5,"center_y": .5} 
        canvas:
            Color:
                rgba:(244/255,249/255,253/255,1)
            RoundedRectangle:
                size:self.size
                pos:self.pos
                radius:[20]   
        ScrollView:
            do_scroll_y:True
            do_scroll_x:False
            size_hint_y:1
            pos_hint:{"center_x":.5,"center_y": .5}
            bar_width:2
            bar_color:(30/255,47/255,151/255,.8)
            GridLayout:
                orientation: "lr-bt"
                id: course_list
                cols: 1
                height:self.minimum_height
                row_default_height:80
                size_hint_y:None
                padding:15,15
                spacing:10,10
  
#navigation menu                    
    MDFloatLayout:
        size_hint:1,.1
        pos_hint: {"center_x": .5,"center_y": .05}
        canvas:
            Color:
                rgba:(0/255,0/255,0/255,1)
            Rectangle:
                size:self.size
                pos:self.pos
                
        MDIconButton:
            icon: "home"
            icon_size:dp(30)
            pos_hint: {"center_x":.14 ,"center_y":.5}
            theme_text_color:"Custom"
            text_color: 1,1,1,1
            on_press:
                root.manager.transition = FadeTransition()
                root.manager.current = "Home"

        MDIconButton:
            icon: "view-agenda"
            icon_size:dp(30)
            pos_hint: {"center_x":.38 ,"center_y":.5}
            theme_text_color:"Custom"
            text_color: 1,1,1,1
            on_press:
                root.manager.transition = FadeTransition()
                root.manager.current = "todoScreen" 
        
        MDFloatLayout:
            size_hint:.2,.8
            pos_hint: {"center_x": .62,"center_y": .5}
            canvas:
                Color:
                    rgba:(30/255,47/255,151/255,.2)
                RoundedRectangle:
                    size:self.size
                    pos:self.pos
                    radius:[20]
            MDIconButton:
                icon: "library"
                icon_size:dp(30)
                pos_hint: {"center_x":.5 ,"center_y":.5}
                theme_text_color:"Custom"
                color:(30/255,47/255,151/255,1)
                on_press:
                    app.update_coursescreen()
                    root.manager.transition = FadeTransition()
                    root.manager.current = "CoursesScreen"
                    
        
        MDIconButton:
            icon: "calendar"
            icon_size:dp(30)
            pos_hint: {"center_x":.86 ,"center_y":.5}
            theme_text_color:"Custom"
            text_color: 1,1,1,1
            on_press:
                root.manager.transition = FadeTransition()
                root.manager.current = "Calendarscreen"
